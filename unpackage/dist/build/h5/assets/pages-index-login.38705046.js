import{n as e,u as s,z as a,A as r,s as o,o as l,c as i,w as t,i as n,a as u,b as m,f as d,e as p}from"./index-ecb441ed.js";import{_ as f,a as c,b as g}from"./uni-forms.d7f3f3ae.js";import{r as _}from"./uni-app.es.58aeac87.js";import{p as y}from"./index.9a912d11.js";import{_ as h}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.d8bf0f6a.js";const x=h({data:()=>({user:{email:"",password:""},rules:{email:{rules:[{required:!0,errorMessage:"请输入邮箱"},{format:"email",errorMessage:"邮箱格式不正确"}]},password:{rules:[{required:!0,errorMessage:"请输入密码"},{minLength:8,maxLength:20,errorMessage:"密码的长度在8到20之间"}]}}}),methods:{toWxLogin(){e({url:"/pages/index/wx_login"})},login(){this.$refs.myform.validate().then((e=>{y("api/mobile/elogin",this.user).then((e=>{const{data:l,msg:i}=e;if(1==e.code&&e.success){const e=s();e.setToken(l.userinfo.token),e.fillUser(l.userinfo),a({key:"isLogin",data:1}),r({url:"/pages/my/my"})}else o({title:i,duration:2e3,icon:"none"})})).catch((e=>{}))}))},toRegister(){}}},[["render",function(e,s,a,r,o,y){const h=_(d("uni-easyinput"),f),x=_(d("uni-forms-item"),c),k=p,V=n,w=_(d("uni-forms"),g);return l(),i(V,{class:"container"},{default:t((()=>[u(w,{class:"myForm",ref:"myform",modelValue:o.user,rules:o.rules},{default:t((()=>[u(x,{name:"email"},{default:t((()=>[u(h,{class:"input",modelValue:o.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>o.user.email=e),placeholder:"请输入邮箱",required:""},null,8,["modelValue"])])),_:1}),u(x,{name:"password"},{default:t((()=>[u(h,{class:"input",modelValue:o.user.password,"onUpdate:modelValue":s[1]||(s[1]=e=>o.user.password=e),placeholder:"请输入密码",required:""},null,8,["modelValue"])])),_:1}),u(k,{type:"default",onClick:y.login},{default:t((()=>[m("用户登录")])),_:1},8,["onClick"]),u(k,{style:{"margin-top":"16px"},onClick:y.toWxLogin,type:"primary"},{default:t((()=>[m("微信登录")])),_:1},8,["onClick"]),u(V,{class:"logo-extra"},{default:t((()=>[u(k,{type:"default",size:"mini"},{default:t((()=>[m("忘记密码")])),_:1}),u(k,{type:"default",size:"mini",onClick:y.toRegister},{default:t((()=>[m("用户注册")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})}],["__scopeId","data-v-e8ce5788"]]);export{x as default};
