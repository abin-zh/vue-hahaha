import{T as s,U as e,u as a,s as o,A as t,o as i,c as n,w as c,i as r,a as d,b as l,e as u}from"./index-ecb441ed.js";import{_ as p}from"./_plugin-vue_export-helper.1b428a4d.js";const f=p({data:()=>({}),methods:{login(){uni.getUserProfile&&uni.getUserProfile({lang:"zh_CN",desc:"用来授权登录该小程序！",success:i=>{s({provider:"weixin",onlyAuthorize:!0,success:function(s){const{code:n}=s;e({url:"https://api.weixin.qq.com/sns/jscode2session",method:"GET",data:{appid:"wxab0372ae0d1a08bb",secret:"3b60715c9abf8d32c7d8b7286b0af8fa",js_code:n,grant_type:"authorization_code"},success:s=>{const e=a(),{data:n}=s;console.log(s),e.setOpenId(n.openid),e.fillUserWx(i.userInfo),o({title:"登录成功"}),t({url:"/pages/my/my"})}})},fail:function(s){o({title:"登录失败"})}})}})}}},[["render",function(s,e,a,o,t,p){const f=u,_=r;return i(),n(_,{class:"container"},{default:c((()=>[d(f,{type:"primary",onClick:p.login},{default:c((()=>[l("微信授权登录")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-8d3685f1"]]);export{f as default};
